<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ bank_name }} Bank</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>Welcome to {{ bank_name }} Bank</h1>

        <!-- Create Account Form -->
        <h2>Create Account</h2>
        <form id="createAccountForm">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="mno">Mobile Number:</label>
            <input type="text" id="mno" name="mno" required>

            <label for="pan">PAN:</label>
            <input type="text" id="pan" name="pan" required>

            <label for="initial_deposit">Initial Deposit:</label>
            <input type="number" id="initial_deposit" name="initial_deposit" required>

            <label for="pin">PIN:</label>
            <input type="password" id="pin" name="pin" required>

            <button type="submit" onclick="createAccount(event)">Create Account</button>
        </form>

        <!-- Check Balance Form -->
        <h2>Check Balance</h2>
        <form id="checkBalanceForm">
            <label for="accno">Account Number:</label>
            <input type="number" id="accno_check" name="accno" required>

            <label for="pin_check">PIN:</label>
            <input type="password" id="pin_check" name="pin" required>

            <button type="submit" onclick="checkBalance(event)">Check Balance</button>
        </form>

        <!-- Withdrawal Form -->
        <h2>Withdrawal</h2>
        <form id="withdrawForm">
            <label for="accno_withdraw">Account Number:</label>
            <input type="number" id="accno_withdraw" name="accno" required>

            <label for="amount_withdraw">Amount:</label>
            <input type="number" id="amount_withdraw" name="amount" required>

            <label for="pin_withdraw">PIN:</label>
            <input type="password" id="pin_withdraw" name="pin" required>

            <button type="submit" onclick="withdraw(event)">Withdraw</button>
        </form>

        <!-- Deposit Form -->
        <h2>Deposit</h2>
        <form id="depositForm">
            <label for="accno_deposit">Account Number:</label>
            <input type="number" id="accno_deposit" name="accno" required>

            <label for="amount_deposit">Amount:</label>
            <input type="number" id="amount_deposit" name="amount" required>

            <label for="pin_deposit">PIN:</label>
            <input type="password" id="pin_deposit" name="pin" required>

            <button type="submit" onclick="deposit(event)">Deposit</button>
        </form>

        <!-- Change PIN Form -->
        <h2>Change PIN</h2>
        <form id="changePinForm">
            <label for="accno_change_pin">Account Number:</label>
            <input type="number" id="accno_change_pin" name="accno" required>

            <label for="old_pin">Old PIN:</label>
            <input type="password" id="old_pin" name="old_pin" required>

            <label for="new_pin">New PIN:</label>
            <input type="password" id="new_pin" name="new_pin" required>

            <button type="submit" onclick="changePin(event)">Change PIN</button>
        </form>

        <!-- Display Result -->
        <div id="result"></div>
    </div>

    <script>
        // Function to handle create account form submission
        function createAccount(event) {
            event.preventDefault();

            const formData = {
                name: document.getElementById('name').value,
                mno: document.getElementById('mno').value,
                pan: document.getElementById('pan').value,
                initial_deposit: document.getElementById('initial_deposit').value,
                pin: document.getElementById('pin').value
            };

            fetch('/create_account', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('result').textContent = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        // Function to handle check balance form submission
        function checkBalance(event) {
            event.preventDefault();

            const formData = {
                accno: document.getElementById('accno_check').value,
                pin: document.getElementById('pin_check').value
            };

            fetch('/check_balance', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('result').textContent = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        // Function to handle withdrawal form submission
        function withdraw(event) {
            event.preventDefault();

            const formData = {
                accno: document.getElementById('accno_withdraw').value,
                amount: document.getElementById('amount_withdraw').value,
                pin: document.getElementById('pin_withdraw').value
            };

            fetch('/withdraw', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('result').textContent = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        // Function to handle deposit form submission
        function deposit(event) {
            event.preventDefault();

            const formData = {
                accno: document.getElementById('accno_deposit').value,
                amount: document.getElementById('amount_deposit').value,
                pin: document.getElementById('pin_deposit').value
            };

            fetch('/deposit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('result').textContent = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        // Function to handle change PIN form submission
        function changePin(event) {
            event.preventDefault();

            const formData = {
                accno: document.getElementById('accno_change_pin').value,
                old_pin: document.getElementById('old_pin').value,
                new_pin: document.getElementById('new_pin').value
            };

            fetch('/change_pin', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('result').textContent = data.message;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>
